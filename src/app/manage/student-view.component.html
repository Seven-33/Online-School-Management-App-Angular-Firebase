<app-header-admin pageTitle="Profile" imageUrl="star" helpType="settingspage"></app-header-admin>
<mat-card [@fallIn]='state'>
  <mat-card-content>
      <!-- <form #editDataForm="ngForm" (ngSubmit)="updateData(editDataForm.value);" novalidate> -->
          <form #editDataForm="ngForm" novalidate>
        <!--<input type="hidden" name="_id" id="_id" [ngModel]="data['_id']" required>-->
        <mat-error *ngIf="savedChanges">
          Data is saved.
          <label class="small-spacer"></label>
          <!-- <mat-icon (click)="this.editDataForm.reset();savedChanges=false;toggle('searchMode');" svgIcon="clear"></mat-icon> -->
          <mat-icon (click)="savedChanges=false;" svgIcon="clear"></mat-icon>
        </mat-error>
        <mat-progress-bar mode="indeterminate" *ngIf="dataLoading"></mat-progress-bar>
        <mat-error *ngIf="error">Error: {{ errorMessage }}</mat-error>
        <div *ngIf="!savedChanges">
          <mat-accordion>
            <mat-expansion-panel>
              <mat-expansion-panel-header>
                <mat-panel-title>
                  Personal data (*)
                </mat-panel-title>
                <mat-panel-description>
                  Name and Personal Information
                </mat-panel-description>
              </mat-expansion-panel-header>
              <mat-form-field>
                <input matInput placeholder="Student ID" name="code" id="code" [ngModel]="data?.code" required minlength="2">
              </mat-form-field>
              <br>
              <mat-form-field>
                  <input matInput placeholder="Student Passcode" name="SKEY" id="SKEY" [ngModel]="data?.SKEY" required minlength="2">
                </mat-form-field>
                <br>
              <mat-form-field>
                <input matInput placeholder="First name" name="descr" id="descr" [ngModel]="data?.descr" required minlength="4">
              </mat-form-field>
              <mat-form-field>
                <input matInput placeholder="Middle name" name="MIDDLE_NAME" id="MIDDLE_NAME" [ngModel]="data?.MIDDLE_NAME" minlength="4">
              </mat-form-field>
              <mat-form-field>
                <input matInput placeholder="Last name" name="LAST_NAME" id="LAST_NAME" [ngModel]="data?.LAST_NAME" required minlength="4">
              </mat-form-field>
              <br>
              <mat-form-field>
                <input matInput placeholder="Date of Birth" type="date" name="DOB" id="DOB" [ngModel]="data?.DOB" required>
              </mat-form-field>
              <br>
              <mat-form-field>
                <input matInput placeholder="Father's name" name="FATHER_NAME" id="FATHER_NAME" [ngModel]="data?.FATHER_NAME" minlength="4">
              </mat-form-field>
              <mat-form-field>
                <input matInput placeholder="Mother's name" name="MOTHER_NAME" id="MOTHER_NAME" [ngModel]="data?.MOTHER_NAME" minlength="4">
              </mat-form-field>
              <br>
              <mat-form-field>
                <input matInput placeholder="Guardian's name" name="GUARDIAN_NAME" id="GUARDIAN_NAME" [ngModel]="data?.GUARDIAN_NAME" minlength="4">
              </mat-form-field>
              <mat-form-field>
                <input matInput placeholder="Guardian Date of Birth" type="date" name="GDOB" id="GDOB" [ngModel]="data?.GDOB">
              </mat-form-field>
            </mat-expansion-panel>
            <mat-expansion-panel>
              <mat-expansion-panel-header>
                <mat-panel-title>
                  Address
                </mat-panel-title>
                <mat-panel-description>
                  Contact Details
                </mat-panel-description>
              </mat-expansion-panel-header>
              <mat-form-field>
                <input matInput placeholder="Address Type" name="ADD_TYPE_1" id="ADD_TYPE_1" [ngModel]="data?.ADD_TYPE_1" minlength="4">
              </mat-form-field>
              <mat-form-field>
                <input matInput placeholder="Address Line 1" name="ADD_LINE_1" id="ADD_LINE_1" [ngModel]="data?.ADD_LINE_1" minlength="4">
              </mat-form-field>
              <mat-form-field>
                <input matInput placeholder="Address Line 2" name="ADD_LINE_2" id="ADD_LINE_2" [ngModel]="data?.ADD_LINE_2">
              </mat-form-field>
              <br>
              <mat-form-field>
                <input matInput placeholder="Pin Code" name="PIN_CODE" id="PIN_CODE" [ngModel]="data?.PIN_CODE">
              </mat-form-field>
              <mat-form-field>
                <input matInput placeholder="State" name="STATE" id="STATE" [ngModel]="data?.STATE">
              </mat-form-field>
              <mat-form-field>
                <input matInput placeholder="Country" name="COUNTRY" id="COUNTRY" [ngModel]="data?.COUNTRY">
              </mat-form-field>
              <br>
              <mat-form-field>
                <input matInput placeholder="Address Type (2)" name="ADD_TYPE_2" id="ADD_TYPE_2" [ngModel]="data?.ADD_TYPE_2" minlength="4">
              </mat-form-field>
              <mat-form-field>
                <input matInput placeholder="Address Line 1" name="ADD_LINE_12" id="ADD_LINE_12" [ngModel]="data?.ADD_LINE_12" minlength="4">
              </mat-form-field>
              <mat-form-field>
                <input matInput placeholder="Address Line 2" name="ADD_LINE_22" id="ADD_LINE_22" [ngModel]="data?.ADD_LINE_22">
              </mat-form-field>
              <br>
              <mat-form-field>
                <input matInput placeholder="Pin Code" name="PIN_CODE2" id="PIN_CODE2" [ngModel]="data?.PIN_CODE2">
              </mat-form-field>
              <mat-form-field>
                <input matInput placeholder="State" name="STATE2" id="STATE2" [ngModel]="data?.STATE2">
              </mat-form-field>
              <mat-form-field>
                <input matInput placeholder="Country" name="COUNTRY2" id="COUNTRY2" [ngModel]="data?.COUNTRY2">
              </mat-form-field>
              <br>
              <mat-form-field>
                <input matInput placeholder="Mobile 1" name="MOBILE1" id="MOBILE1" [ngModel]="data?.MOBILE1" phone minlength="10">
              </mat-form-field>
              <mat-form-field>
                <input matInput placeholder="Mobile 2" name="MOBILE2" id="MOBILE2" [ngModel]="data?.MOBILE2" phone minlength="10">
              </mat-form-field>
              <br>
              <mat-form-field>
                <input matInput placeholder="Email 1" name="EMAIL1" id="EMAIL1" [ngModel]="data?.EMAIL1" phone minlength="10">
              </mat-form-field>
              <mat-form-field>
                <input matInput placeholder="Email 2" name="EMAIL2" id="EMAIL2" [ngModel]="data?.EMAIL2" phone minlength="10">
              </mat-form-field>
            </mat-expansion-panel>
            <mat-expansion-panel>
              <mat-expansion-panel-header>
                <mat-panel-title>
                  Qualifications
                </mat-panel-title>
                <mat-panel-description>
                  Performance Details
                </mat-panel-description>
              </mat-expansion-panel-header>
              <mat-form-field>
                <input matInput placeholder="Degree(s)" name="DEGREE" id="DEGREE" [ngModel]="data?.DEGREE" minlength="4">
              </mat-form-field>
              <br>
              <mat-form-field>
                <input matInput placeholder="Last College Attended" name="COLLEGE" id="COLLEGE" [ngModel]="data?.COLLEGE" minlength="4">
              </mat-form-field>
              <br>
              <mat-form-field>
                <input matInput placeholder="College Address Line 1" name="ADD_LINE_C1" id="ADD_LINE_C1" [ngModel]="data?.ADD_LINE_C1" minlength="4">
              </mat-form-field>
              <mat-form-field>
                <input matInput placeholder="College Address Line 2" name="ADD_LINE_C2" id="ADD_LINE_C2" [ngModel]="data?.ADD_LINE_C2">
              </mat-form-field>
              <br>
              <mat-form-field>
                <input matInput placeholder="College Pin Code" name="PIN_CODE_C" id="PIN_CODE_C" [ngModel]="data?.PIN_CODE_C">
              </mat-form-field>
              <mat-form-field>
                <input matInput placeholder="College State" name="STATE_C" id="STATE_C" [ngModel]="data?.STATE_C">
              </mat-form-field>
              <mat-form-field>
                <input matInput placeholder="College Country" name="COUNTRY_C" id="COUNTRY_C" [ngModel]="data?.COUNTRY_C">
              </mat-form-field>
            </mat-expansion-panel>
            <mat-expansion-panel>
              <mat-expansion-panel-header>
                <mat-panel-title>
                  References
                </mat-panel-title>
                <mat-panel-description>
                  References Details
                </mat-panel-description>
              </mat-expansion-panel-header>
              <mat-form-field>
                <input matInput placeholder="Reference 1" name="REFERENCE_1" id="REFERENCE_1" [ngModel]="data?.REFERENCE_1" minlength="4">
              </mat-form-field>
              <mat-form-field>
                <input matInput placeholder="Reference 1 Address" name="REFERENCE_1_ADD" id="REFERENCE_1_ADD" [ngModel]="data?.REFERENCE_1_ADD" minlength="4">
              </mat-form-field>
              <br>
              <mat-form-field>
                <input matInput placeholder="Reference 2" name="REFERENCE_2" id="REFERENCE_2" [ngModel]="data?.REFERENCE_2" minlength="4">
              </mat-form-field>
              <mat-form-field>
                <input matInput placeholder="Reference 2 Address" name="REFERENCE_2_ADD" id="REFERENCE_2_ADD" [ngModel]="data?.REFERENCE_2_ADD" minlength="4">
              </mat-form-field>
            </mat-expansion-panel>
            <mat-expansion-panel>
              <mat-expansion-panel-header>
                <mat-panel-title>
                  HR (*)
                </mat-panel-title>
                <mat-panel-description>
                  Compensation Details
                </mat-panel-description>
              </mat-expansion-panel-header>
              <mat-form-field>
                <input readonly="" matInput placeholder="Enrollment Code" name="ENROLLMENT_CODE" id="ENROLLMENT_CODE" [ngModel]="data?.ENROLLMENT_CODE" minlength="4">
              </mat-form-field>
              <mat-form-field>
                  <input readonly="" matInput placeholder="Fee Code" name="FEE_CODE" id="FEE_CODE" [ngModel]="data?.FEE_CODE" minlength="4">
              </mat-form-field>
              <mat-form-field>
                  <input readonly="" matInput placeholder="Marks Code" name="MARKS_CODE" id="MARKS_CODE" [ngModel]="data?.MARKS_CODE" minlength="4">
              </mat-form-field>
            </mat-expansion-panel>
            <mat-expansion-panel>
              <mat-expansion-panel-header>
                <mat-panel-title>
                  Documents
                </mat-panel-title>
                <mat-panel-description>
                  Documents Links
                </mat-panel-description>
              </mat-expansion-panel-header>
                    <div *ngFor="let file of data?.files">
                        <br/>
                        <button type="button" mat-raised-button (click)="showDocument=!showDocument; getDocUrl(file);" color="primary">Show Document</button>
                    </div>
                <div *ngIf="showDocument">
                    <span matTooltip="Close">
                        <mat-icon color="primary" (click)="showDocument = !showDocument;">clear
                        </mat-icon>
                    </span>
                    <br/>
                    <a href="{{ docUrl | async }}" target="_blank">Click here to open {{ fileName }} document</a>
                </div>
                <br>
                <div *ngIf="showFileUpload">
                    <span matTooltip="Close">
                        <mat-icon color="primary" (click)="showFileUpload = !showFileUpload;">clear
                        </mat-icon>
                    </span>
                    <br/>
                    <app-fileupload fileUrl="STUDENT" docId="{{docId}}"></app-fileupload>
                </div>
                <br>
                <!--<button type="button" mat-raised-button (click)="showFileUpload=!showFileUpload" color="primary">Upload File</button>-->
            </mat-expansion-panel>
          </mat-accordion>
        </div>
      </form>
  </mat-card-content>
</mat-card>
